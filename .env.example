# ========================================
# URL Shortener - Variáveis de Ambiente
# ========================================
# 
# Instruções:
# 1. Copie este arquivo: cp .env.example .env
# 2. Configure as variáveis conforme seu ambiente
# 3. NUNCA commite o arquivo .env com valores reais
# 
# ⚠️ IMPORTANTE: Em produção, gere um JWT_SECRET seguro:
# openssl rand -base64 32
# ========================================

# ========================================
# AMBIENTE
# ========================================
NODE_ENV=development
# NODE_ENV=production  # Descomente para produção

# ========================================
# BANCO DE DADOS
# ========================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=url_shortener
DB_SSL=false

# Para Docker Compose (monorepo)
# DB_HOST=postgres
# DB_PORT=5432

# ========================================
# AUTENTICAÇÃO JWT
# ========================================
# ⚠️ CRÍTICO: Em produção, gere um secret seguro:
# openssl rand -base64 32
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=24h

# ========================================
# SERVIÇOS (Monorepo)
# ========================================
# Auth Service
PORT=3001
SERVICE_NAME=auth-service

# URL Service
# PORT=3002
# SERVICE_NAME=url-service

# API Gateway
# Porta 8080 (definida no docker-compose.monorepo.yml)

# API Base URL (usado para gerar URLs encurtadas)
API_BASE_URL=http://localhost:8080

# ========================================
# APLICAÇÃO
# ========================================
SHORT_CODE_LENGTH=6
SHORT_CODE_STRATEGY=hash  # hash ou random

# ========================================
# OBSERVABILIDADE
# ========================================
ENABLE_LOGGING=true
LOG_LEVEL=info  # error, warn, info, debug

# Métricas Prometheus
ENABLE_METRICS=false
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Tracing (OpenTelemetry/Jaeger)
ENABLE_TRACING=false
# ELASTIC_APM_SERVER_URL=http://localhost:8200
# JAEGER_AGENT_HOST=localhost
# JAEGER_AGENT_PORT=6831

# ========================================
# SERVIÇOS EXTERNOS (Opcional)
# ========================================
# Sentry (Error Tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
# SENTRY_ENABLED=false

# Datadog (APM)
# DATADOG_API_KEY=your-api-key
# DATADOG_ENABLED=false
# DATADOG_SERVICE=url-shortener

# Elastic APM
# ELASTIC_APM_SERVER_URL=http://localhost:8200
# ELASTIC_APM_ENABLED=false
# ELASTIC_APM_SERVICE_NAME=url-shortener

# ========================================
# RESILIÊNCIA (Opcional)
# ========================================
# Circuit Breaker
# CIRCUIT_BREAKER_THRESHOLD=5
# CIRCUIT_BREAKER_TIMEOUT=60000

# Retry Pattern
# RETRY_MAX_ATTEMPTS=3
# RETRY_INITIAL_DELAY=100
# RETRY_MAX_DELAY=5000
# RETRY_FACTOR=2

# Timeout
# REQUEST_TIMEOUT=30000

# ========================================
# RATE LIMITING (Opcional)
# ========================================
THROTTLE_TTL=60  # Janela de tempo em segundos
THROTTLE_LIMIT=100  # Máximo de requisições por janela

# ========================================
# CORS (Opcional)
# ========================================
# CORS_ORIGIN=*
# CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# ========================================
# AUTH SERVICE (Monorepo)
# ========================================
# AUTH_SERVICE_URL=http://auth-service:3001
# Usado apenas pelo url-service quando necessário

# ========================================
# NOTAS
# ========================================
# 
# 1. Variáveis Obrigatórias em Produção:
#    - JWT_SECRET (deve ser gerado de forma segura)
#    - DB_HOST
#    - NODE_ENV=production
#
# 2. Variáveis com Fallback (podem ser omitidas em desenvolvimento):
#    - DB_PORT (padrão: 5432)
#    - DB_USER (padrão: postgres)
#    - JWT_EXPIRES_IN (padrão: 24h)
#    - SHORT_CODE_LENGTH (padrão: 6)
#    - SHORT_CODE_STRATEGY (padrão: hash)
#
# 3. Serviços Externos:
#    - Configure apenas se necessário
#    - Em desenvolvimento, deixe comentado ou desabilite
#    - Em produção, configure credenciais seguras
#
# 4. Para Docker Compose:
#    - Use as variáveis definidas no docker-compose.monorepo.yml
#    - DB_HOST deve ser "postgres" (nome do serviço)
#    - JWT_SECRET é obrigatório em produção
#
# ========================================
